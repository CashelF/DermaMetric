(()=>{"use strict";var e={5044:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var r=n(5861),o=n(885),a=n(5004),i=n(3426),l=n(6792),s=n(1054),c=n(7492),d=n(1263),u=n(5705),f=n(363),h=n(4942),g=n(4584),m=n(9385),p=n(3287),y=n(2152),b=n(5288),x=n(229),j=n(2113),w=n(2826);const C={background:"#F6F6F6",primary:"#ECF2F3",accent:"#45B3CB"};var v=n(1318),k=n(3992),S=n(9986),B=n(9964),T=n(9910),A=n(7602),z=n(5295),O=n(2629),I=g.default.get("window").height,R=l.default.create({headerContainer:{height:.1*I,flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginHorizontal:22},leftIcon:{color:"#45B3CB"},rightIcon:{color:"#45B3CB"}});const N=function(){var e=(0,v.useNavigation)();return(0,O.jsx)(A.default,{children:(0,O.jsxs)(m.default,{style:R.headerContainer,children:[(0,O.jsx)(b.default,{onPress:function(){e.navigate("Upload")},children:(0,O.jsx)(z.default,{name:"home",style:R.leftIcon,size:32})}),(0,O.jsx)(z.default,{name:"medkit",style:R.rightIcon,size:32})]})})};var D=n(8441),P=function(e){return{MEL:"A type of skin cancer that develops from the pigment-producing cells known as melanocytes.",NV:"Commonly known as a mole, these are typically benign skin growths that result from a proliferation of melanocytes.",BCC:"A form of skin cancer that begins in the basal cells \u2013 cells within the skin that produce new skin cells as old ones die off.",AK:"A rough, scaly patch on the skin that develops from years of exposure to the sun and is considered a precancerous skin lesion.",BKL:"A benign skin lesion that includes seborrheic keratoses and solar lentigines. These are common non-cancerous growths.",DF:"A non-cancerous round, brownish skin growth, typically found on the lower legs.",VASC:"These are skin lesions that are made up of blood vessels that have abnormally proliferated. They include things like cherry angiomas, angiokeratomas, and pyogenic granulomas.",SCC:"A form of skin cancer that develops in the squamous cells, which make up the middle and outer layers of the skin."}[e]},V=l.default.create({container:{flex:1},boxContainer:{flex:1,paddingHorizontal:20,paddingTop:10,height:"25%"},box:{marginBottom:10},inner:{paddingHorizontal:10,paddingVertical:"4%",borderRadius:15,backgroundColor:"#45B3CB"},innerSecond:{paddingHorizontal:10,paddingVertical:"4%",borderRadius:15,backgroundColor:"rgb(237, 115, 144)"},innerThird:{paddingHorizontal:10,paddingVertical:"4%",borderRadius:15,backgroundColor:"rgb(229, 152, 80)"},row:{flexDirection:"row",alignItems:"center"},arrow:{fontSize:24,marginRight:10,color:"white"},innerIcon:{color:"white",marginRight:10},shortenedName:{color:"white",fontSize:18,fontWeight:"bold",marginRight:10},expandedContent:{marginTop:10},fullname:{color:"white",fontSize:20,fontWeight:"bold"},descriptionText:{paddingTop:5,color:"white",fontSize:14},mainTextContainer:{marginHorizontal:22},mainText:{fontSize:24,lineHeight:32},arrowIcon:{color:"white",marginRight:10,fontSize:24}});const F=function(){var e,t=(null==(e=(0,v.useRoute)().params)?void 0:e.resultData).prediction,n=(0,a.useState)(new B.default.Value(0)),r=(0,o.default)(n,2),i=r[0],l=(r[1],(0,a.useState)(null)),c=(0,o.default)(l,2),d=c[0],u=c[1],f=function(e){var t=d===e?0:1;B.default.timing(i,{toValue:t,duration:300,easing:T.default.linear,useNativeDriver:!0}).start()},h=Object.keys(t).map((function(e){return[e,t[e]]}));h.sort((function(e,t){return t[1]-e[1]})),h=h.slice(0,4);var g={MEL:"Melanoma",NV:"Melanocytic Nevus",BCC:"Basal Cell Carcinoma",AK:"Actinic Keratosis",BKL:"Benign Keratosis",DF:"Dermatofibroma",VASC:"Vascular Lesion",SCC:"Squamous Cell Carcinoma"};return(0,O.jsxs)(m.default,{style:V.container,children:[(0,O.jsx)(N,{}),(0,O.jsxs)(m.default,{style:V.mainTextContainer,children:[(0,O.jsx)(s.default,{style:V.mainText,children:"Hello!"}),(0,O.jsx)(s.default,{style:V.mainText,children:"These are your top matches:"})]}),(0,O.jsx)(m.default,{style:V.boxContainer,children:h.map((function(e,t){return(0,O.jsx)(m.default,{style:[V.box,1===t?V.innerSecond:2===t?V.innerThird:V.inner],children:(0,O.jsx)(b.default,{onPress:function(){!function(e){u(d===e?null:e),f(e)}(t)},children:(0,O.jsxs)(m.default,{style:[V.innerContent,{backgroundColor:1===t?"rgb(237, 115, 144)":2===t?"rgb(229, 152, 80)":"#45B3CB"}],children:[(0,O.jsxs)(m.default,{style:V.row,children:[d===t?(0,O.jsx)(B.default.View,{style:[V.arrowIcon,{transform:[{rotate:i.interpolate({inputRange:[0,1],outputRange:["0deg","180deg"]})}]}],children:(0,O.jsx)(D.default,{name:"angle-down",style:V.arrowIcon})}):(0,O.jsx)(D.default,{name:"angle-right",style:V.arrowIcon}),(0,O.jsx)(z.default,{name:"medkit",style:V.innerIcon,size:24}),(0,O.jsxs)(s.default,{style:V.shortenedName,children:[e[0]," - ",(100*e[1]).toFixed(2),"%"]})]}),d===t&&(0,O.jsxs)(m.default,{style:V.expandedContent,children:[(0,O.jsx)(s.default,{style:V.fullname,children:g[e[0]]}),(0,O.jsx)(s.default,{style:V.descriptionText,children:P(e[0])})]})]})})},t)}))})]})};var H=n(3224);var M=l.default.create({container:{flex:1},boxContainer:{flex:1,paddingHorizontal:20,paddingTop:10,height:"25%"},box:{marginBottom:10,borderRadius:15},inner:{paddingHorizontal:10,paddingVertical:"4%",borderRadius:15},innerSecond:{paddingHorizontal:10,paddingVertical:"4%",borderRadius:15},innerThird:{paddingHorizontal:10,paddingVertical:"4%",borderRadius:15},row:{flexDirection:"row",alignItems:"center"},arrow:{fontSize:24,marginRight:10,color:"white"},innerIcon:{color:"white",marginRight:10},shortenedName:{color:"white",fontSize:18,fontWeight:"bold",marginRight:10},expandedContent:{marginTop:10},fullname:{color:"white",fontSize:20,fontWeight:"bold"},descriptionText:{paddingTop:5,color:"white",fontSize:14},mainTextContainer:{marginHorizontal:22},mainText:{fontSize:24,lineHeight:32},arrowIcon:{color:"white",marginRight:10,fontSize:24}});const E=function(){var e={MEL:"Melanoma",NV:"Melanocytic Nevus",BCC:"Basal Cell Carcinoma",AK:"Actinic Keratosis",BKL:"Benign Keratosis",DF:"Dermatofibroma",VASC:"Vascular Lesion",SCC:"Squamous Cell Carcinoma"},t={MEL:"A type of skin cancer that develops from the pigment-producing cells known as melanocytes.",NV:"Commonly known as a mole, these are typically benign skin growths that result from a proliferation of melanocytes.",BCC:"A form of skin cancer that begins in the basal cells \u2013 cells within the skin that produce new skin cells as old ones die off.",AK:"A rough, scaly patch on the skin that develops from years of exposure to the sun and is considered a precancerous skin lesion.",BKL:"A benign skin lesion that includes seborrheic keratoses and solar lentigines. These are common non-cancerous growths.",DF:"A non-cancerous round, brownish skin growth, typically found on the lower legs.",VASC:"These are skin lesions that are made up of blood vessels that have abnormally proliferated. They include things like cherry angiomas, angiokeratomas, and pyogenic granulomas.",SCC:"A form of skin cancer that develops in the squamous cells, which make up the middle and outer layers of the skin."},n=function(e){return["#45B3CB","rgb(237, 115, 144)","rgb(229, 152, 80)"][e%3]};return(0,O.jsxs)(m.default,{style:M.container,children:[(0,O.jsx)(N,{}),(0,O.jsxs)(m.default,{style:M.mainTextContainer,children:[(0,O.jsx)(s.default,{style:M.mainText,children:"Hello!"}),(0,O.jsx)(s.default,{style:M.mainText,children:"These are common conditions:"})]}),(0,O.jsx)(H.default,{style:M.boxContainer,children:Object.keys(e).map((function(r,o){return(0,O.jsx)(m.default,{style:[M.box,{backgroundColor:n(o)}],children:(0,O.jsxs)(m.default,{style:M.inner,children:[(0,O.jsx)(s.default,{style:M.fullname,children:e[r]}),(0,O.jsx)(s.default,{style:M.descriptionText,children:t[r]})]})},o)}))})]})};var L=(0,k.default)();const K=function(){return(0,O.jsxs)(L.Navigator,{initialRouteName:"ResultScreen",activeColor:"#fff",barStyle:{backgroundColor:"#45B3CB"},children:[(0,O.jsx)(L.Screen,{name:"ResultScreen",component:F,options:{tabBarLabel:"Home",tabBarIcon:function(e){var t=e.color;return(0,O.jsx)(S.default,{name:"home",color:t,size:26})}}}),(0,O.jsx)(L.Screen,{name:"ConditionsScreen",component:E,options:{tabBarLabel:"Conditions",tabBarIcon:function(e){var t=e.color;return(0,O.jsx)(S.default,{name:"medical-bag",color:t,size:26})}}})]})};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=g.default.get("window").width,_=1.6*q,X=n(6135),G=l.default.create({container:{flex:1,backgroundColor:C.background,alignItems:"center",justifyContent:"center"},title:{color:C.accent,fontSize:36,marginBottom:50,fontFamily:"Nunito-Bold",fontWeight:"700"},imageAndEllipseContainer:{alignItems:"center",justifyContent:"center"},ellipse:{position:"absolute",top:-_/1.6,width:q,height:_,backgroundColor:C.primary,borderRadius:q,transform:[{scaleX:1.25}]},image:{width:.4*q,height:.4*q*(231/269),zIndex:1,aspectRatio:1},header:{fontSize:22,marginTop:50,marginBottom:20,fontFamily:"Nunito-Bold",fontWeight:"700"},description:{fontSize:20,fontFamily:"Nunito-Regular",textAlign:"center",marginHorizontal:50,marginBottom:50},button:{backgroundColor:C.accent,borderRadius:20,padding:10,width:.75*q,height:50,justifyContent:"center",alignItems:"center"},loaderContainer:U(U({},l.default.absoluteFillObject),{},{backgroundColor:"rgba(255, 255, 255, 0.5)",justifyContent:"center",alignItems:"center",zIndex:999})});const J=function(){var e=(0,v.useNavigation)(),t=(0,a.useState)(!1),n=(0,o.default)(t,2),i=n[0],l=n[1],c=function(){var e=(0,r.default)((function*(){if((yield j.requestMediaLibraryPermissionsAsync()).granted){var e=yield j.launchImageLibraryAsync({mediaTypes:w.MediaTypeOptions.Images,allowsEditing:!0,quality:1});if(!0!==e.canceled)return e}else alert("Photo access is not enabled!")}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uri.match(/^data:(.*);base64,/),n=t?t[1]:null,r=new FormData;if(e.uri.startsWith("file://"))r.append("file",{uri:"ios"===y.default.OS?e.uri.replace("file://",""):e.uri,type:n||"image/jpeg",name:e.fileName||"image.jpg"});else{var o=function(e,t){for(var n=atob(e.split(",")[1]),r=new Array(n.length),o=0;o<n.length;o++)r[o]=n.charCodeAt(o);var a=new Uint8Array(r);return new Blob([a],{type:t})}(e.uri,e.type||"image/jpeg");r.append("file",o,e.fileName||"image.jpg")}return r},u=function(){var t=(0,r.default)((function*(){try{var t=yield c();if(!t)return;l(!0);var n=d({uri:t.assets[0].uri,type:"image/jpeg",name:"photo.jpg"}),r=yield fetch("https://api.dermetric.cashel.dev/api/ml/predict",{method:"POST",body:n});if(!r.ok)throw new Error("Something went wrong with the API call");var o=yield r.json();e.navigate("Main",{screen:"ResultScreen",params:{resultData:o}})}catch(a){console.error("Error during image upload: ",a),alert("Error during image upload. Please try again.")}finally{l(!1)}}));return function(){return t.apply(this,arguments)}}();return(0,O.jsxs)(m.default,{style:G.container,children:[i&&(0,O.jsx)(m.default,{style:G.loaderContainer,children:(0,O.jsx)(x.default,{size:"large",color:C.accent})}),(0,O.jsxs)(m.default,{style:G.imageAndEllipseContainer,children:[(0,O.jsx)(m.default,{style:G.ellipse}),(0,O.jsx)(s.default,{style:G.title,children:"Dermetric"}),(0,O.jsx)(p.default,{source:X,style:G.image})]}),(0,O.jsx)(s.default,{style:G.header,children:"AI Medical Assistant"}),(0,O.jsx)(s.default,{style:G.description,children:"Use our image classification machine learning algorithms to test for skin disorders"}),!i&&(0,O.jsx)(b.default,{style:G.button,onPress:u,children:(0,O.jsx)(s.default,{style:{color:"white",fontSize:18,fontFamily:"Nunito-Bold",fontWeight:"700"},children:"Upload Image"})})]})};var Q=(0,f.default)();const Y=function(){return(0,O.jsxs)(Q.Navigator,{initialRouteName:"Upload",children:[(0,O.jsx)(Q.Screen,{name:"Upload",component:J,options:{headerShown:!1}}),(0,O.jsx)(Q.Screen,{name:"Main",component:K,options:{headerShown:!1}})]})};function Z(){var e=(0,a.useState)(!1),t=(0,o.default)(e,2),l=t[0],f=t[1];function h(){return(h=(0,r.default)((function*(){yield c.loadAsync({"Nunito-Bold":n(8267),"Nunito-Regular":n(9218)})}))).apply(this,arguments)}return(0,a.useEffect)((function(){function e(){return e=(0,r.default)((function*(){try{yield d.preventAutoHideAsync(),yield function(){return h.apply(this,arguments)}()}catch(e){console.warn(e)}finally{f(!0),d.hideAsync()}})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),l?(0,O.jsxs)(u.default,{children:[(0,O.jsx)(i.default,{style:"auto"}),(0,O.jsx)(Y,{})]}):(0,O.jsx)(s.default,{children:"Loading Fonts..."})}l.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},8267:(e,t,n)=>{e.exports=n.p+"static/media/Nunito-Bold.275dd55e10ba966bcb9b.ttf"},9218:(e,t,n)=>{e.exports=n.p+"static/media/Nunito-Regular.9d7a6e03c6e3ed49c7ac.ttf"},6135:(e,t,n)=>{e.exports=n.p+"static/media/UploadScreenDoctor.f71cd1ae8623186831e1.png"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,(()=>{var e=[];n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(d=0;d<e.length;d++){for(var[r,o,a]=e[d],l=!0,s=0;s<r.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,o,a]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Dermetric/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,l,s]=r,c=0;if(i.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)var d=s(n)}for(t&&t(r);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[151],(()=>n(6271)));r=n.O(r)})();
//# sourceMappingURL=main.4eec3d02.js.map