(()=>{"use strict";var e={4412:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var r=n(5861),i=n(885),a=n(5004),o=n(3426),l=n(6792),s=n(1054),c=n(7492),d=n(1263),u=n(5222),f=n(2785),p=n(4942),y=n(4584),h=n(9385),g=n(3287),m=n(2152),j=n(5288),x=n(2113),b=n(2826);const v={background:"#F6F6F6",primary:"#ECF2F3",accent:"#45B3CB"};var w=n(1318),O=n(5718),C=n.n(O),P=n(2629);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=y.default.get("window").width,k=1.6*T,B=n(6135),N=l.default.create({container:{flex:1,backgroundColor:v.background,alignItems:"center",justifyContent:"center"},title:{color:v.accent,fontSize:36,marginBottom:50,fontFamily:"Nunito-Bold",fontWeight:"700"},imageAndEllipseContainer:{alignItems:"center",justifyContent:"center"},ellipse:{position:"absolute",top:-k/1.6,width:T,height:k,backgroundColor:v.primary,borderRadius:T,transform:[{scaleX:1.25}]},image:{width:.5*T,height:.5*T*(231/269),zIndex:1},header:{fontSize:18,marginTop:50,marginBottom:20,fontFamily:"Nunito-Bold",fontWeight:"700"},description:{fontSize:16,fontFamily:"Nunito-Regular",textAlign:"center",marginHorizontal:50,marginBottom:50},button:{backgroundColor:v.accent,borderRadius:20,padding:10,width:"75%",height:50,justifyContent:"center",alignItems:"center"},loaderContainer:I(I({},l.default.absoluteFillObject),{},{backgroundColor:"rgba(255, 255, 255, 0.5)",justifyContent:"center",alignItems:"center",zIndex:999})});const z=function(){var e=(0,w.useNavigation)(),t=(0,a.useState)(!1),n=(0,i.default)(t,2),o=n[0],l=n[1],c=function(){var e=(0,r.default)((function*(){if((yield x.requestMediaLibraryPermissionsAsync()).granted){var e=yield x.launchImageLibraryAsync({mediaTypes:b.MediaTypeOptions.Images,allowsEditing:!0,quality:1});if(!0!==e.canceled)return e}else alert("Photo access is not enabled!")}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uri.match(/^data:(.*);base64,/),n=t?t[1]:null,r=new FormData;if(e.uri.startsWith("file://"))r.append("file",{uri:"ios"===m.default.OS?e.uri.replace("file://",""):e.uri,type:n||"image/jpeg",name:e.fileName||"image.jpg"});else{var i=function(e,t){for(var n=atob(e.split(",")[1]),r=new Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);var a=new Uint8Array(r);return new Blob([a],{type:t})}(e.uri,e.type||"image/jpeg");r.append("file",i,e.fileName||"image.jpg")}return r},u=function(){var t=(0,r.default)((function*(){try{var t=yield c();if(!t)return;l(!0);var n=d({uri:t.assets[0].uri,type:"image/jpeg",name:"photo.jpg"}),r=yield fetch("https://api.cashel.dev/api/ml/predict",{method:"POST",body:n});if(!r.ok)throw new Error("Something went wrong with the API call");var i=yield r.json();e.navigate("ResultScreen",{resultData:i})}catch(a){console.error("Error during image upload: ",a),alert("Error during image upload. Please try again.")}finally{l(!1)}}));return function(){return t.apply(this,arguments)}}();return(0,P.jsxs)(h.default,{style:N.container,children:[o&&(0,P.jsx)(h.default,{style:N.loaderContainer,children:(0,P.jsx)(C(),{color:v.accent,loading:o,size:150,"aria-label":"Loading Spinner","data-testid":"loader"})}),(0,P.jsxs)(h.default,{style:N.imageAndEllipseContainer,children:[(0,P.jsx)(h.default,{style:N.ellipse}),(0,P.jsx)(s.default,{style:N.title,children:"Dermetric."}),(0,P.jsx)(g.default,{source:B,style:N.image})]}),(0,P.jsx)(s.default,{style:N.header,children:"AI Medical Assistant"}),(0,P.jsx)(s.default,{style:N.description,children:"Use our image classification machine learning algorithms to test for skin disorders"}),!o&&(0,P.jsx)(j.default,{style:N.button,onPress:u,children:(0,P.jsx)(s.default,{style:{color:"white",fontSize:18,fontFamily:"Nunito-Bold",fontWeight:"700"},children:"Upload Image"})})]})};var D=n(7602),A=n(1036),F=y.default.get("window").height,E=l.default.create({headerContainer:{height:.1*F,flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginHorizontal:22},leftIcon:{color:"#45B3CB"},rightIcon:{color:"#45B3CB"}});const M=function(){return(0,P.jsx)(D.default,{children:(0,P.jsxs)(h.default,{style:E.headerContainer,children:[(0,P.jsx)(A.default,{name:"home",style:E.leftIcon,size:32}),(0,P.jsx)(A.default,{name:"medkit",style:E.rightIcon,size:32})]})})};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=l.default.create({container:{width:"100%"},boxContainer:{height:"65%",marginHorizontal:20,paddingTop:10,flexDirection:"row",flexWrap:"wrap"},box:{width:"50%",height:"50%",padding:5},inner:{flex:1,width:"100%",paddingHorizontal:"10%",paddingVertical:"30%",borderRadius:15},mainTextContainer:{marginHorizontal:22},mainText:{fontSize:24,lineHeight:32},innerIcon:{color:"white"},innerInlineText:{paddingTop:"35%",flexDirection:"row",justifyContent:"space-between"},innerNamePerc:{color:"white",fontSize:16,fontWeight:"bold"},descriptionText:{paddingTop:"5%",color:"white",fontSize:12}});const W=function(){var e,t=(null==(e=(0,w.useRoute)().params)?void 0:e.resultData).prediction;console.log(t);var n=Object.keys(t).map((function(e){return[e,t[e]]}));n.sort((function(e,t){return t[1]-e[1]})),console.log(n);var r={MEL:"Melanoma",NV:"Melanocytic Nevus",BCC:"Basal Cell Carcinoma",AK:"Actinic Keratosis",BKL:"Benign Keratosis",DF:"Dermatofibroma",VASC:"Vascular Lesion",SCC:"Squamous Cell Carcinoma"};return(0,P.jsxs)(h.default,{style:L.container,children:[(0,P.jsx)(M,{}),(0,P.jsxs)(h.default,{style:L.mainTextContainer,children:[(0,P.jsx)(s.default,{style:L.mainText,children:"Hello,"}),(0,P.jsx)(s.default,{style:L.mainText,children:"These are your top matches"})]}),(0,P.jsxs)(h.default,{style:L.boxContainer,children:[(0,P.jsx)(h.default,{style:L.box,children:(0,P.jsxs)(h.default,{style:H(H({},L.inner),{},{backgroundColor:"#45B3CB"}),children:[(0,P.jsx)(A.default,{name:"medkit",style:L.innerIcon,size:32}),(0,P.jsxs)(h.default,{style:L.innerInlineText,children:[(0,P.jsx)(s.default,{style:L.innerNamePerc,children:n[0][0]}),(0,P.jsxs)(s.default,{style:L.innerNamePerc,children:[(100*n[0][1]).toFixed(2),"%"]})]}),(0,P.jsx)(s.default,{style:L.descriptionText,children:r[n[0][0]]})]})}),(0,P.jsx)(h.default,{style:L.box,children:(0,P.jsxs)(h.default,{style:H(H({},L.inner),{},{backgroundColor:"#ED7390"}),children:[(0,P.jsx)(A.default,{name:"medkit",style:L.innerIcon,size:32}),(0,P.jsxs)(h.default,{style:L.innerInlineText,children:[(0,P.jsx)(s.default,{style:L.innerNamePerc,children:n[1][0]}),(0,P.jsxs)(s.default,{style:L.innerNamePerc,children:[(100*n[1][1]).toFixed(2),"%"]})]}),(0,P.jsx)(s.default,{style:L.descriptionText,children:r[n[1][0]]})]})}),(0,P.jsx)(h.default,{style:L.box,children:(0,P.jsxs)(h.default,{style:H(H({},L.inner),{},{backgroundColor:"#E59850"}),children:[(0,P.jsx)(A.default,{name:"medkit",style:L.innerIcon,size:32}),(0,P.jsxs)(h.default,{style:L.innerInlineText,children:[(0,P.jsx)(s.default,{style:L.innerNamePerc,children:n[2][0]}),(0,P.jsxs)(s.default,{style:L.innerNamePerc,children:[(100*n[2][1]).toFixed(2),"%"]})]}),(0,P.jsx)(s.default,{style:L.descriptionText,children:r[n[2][0]]})]})}),(0,P.jsx)(h.default,{style:L.box,children:(0,P.jsxs)(h.default,{style:H(H({},L.inner),{},{backgroundColor:"#45B3CB"}),children:[(0,P.jsx)(A.default,{name:"medkit",style:L.innerIcon,size:32}),(0,P.jsxs)(h.default,{style:L.innerInlineText,children:[(0,P.jsx)(s.default,{style:L.innerNamePerc,children:n[3][0]}),(0,P.jsxs)(s.default,{style:L.innerNamePerc,children:[(100*n[3][1]).toFixed(2),"%"]})]}),(0,P.jsx)(s.default,{style:L.descriptionText,children:r[n[3][0]]})]})})]})]})};var U=(0,f.default)();const K=function(){return(0,P.jsxs)(U.Navigator,{children:[(0,P.jsx)(U.Screen,{name:"UploadScreen",component:z}),(0,P.jsx)(U.Screen,{name:"ResultScreen",component:W})]})};function V(){var e=(0,a.useState)(!1),t=(0,i.default)(e,2),l=t[0],f=t[1];function p(){return(p=(0,r.default)((function*(){yield c.loadAsync({"Nunito-Bold":n(8267),"Nunito-Regular":n(9218)})}))).apply(this,arguments)}return(0,a.useEffect)((function(){function e(){return e=(0,r.default)((function*(){try{yield d.preventAutoHideAsync(),yield function(){return p.apply(this,arguments)}()}catch(e){console.warn(e)}finally{f(!0),d.hideAsync()}})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),l?(0,P.jsxs)(u.default,{children:[(0,P.jsx)(o.default,{style:"auto"}),(0,P.jsx)(K,{})]}):(0,P.jsx)(s.default,{children:"Loading Fonts..."})}l.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},8267:(e,t,n)=>{e.exports=n.p+"static/media/Nunito-Bold.275dd55e10ba966bcb9b.ttf"},9218:(e,t,n)=>{e.exports=n.p+"static/media/Nunito-Regular.9d7a6e03c6e3ed49c7ac.ttf"},6135:(e,t,n)=>{e.exports=n.p+"static/media/UploadScreenDoctor.f71cd1ae8623186831e1.png"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,(()=>{var e=[];n.O=(t,r,i,a)=>{if(!r){var o=1/0;for(d=0;d<e.length;d++){for(var[r,i,a]=e[d],l=!0,s=0;s<r.length;s++)(!1&a||o>=a)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(l=!1,a<o&&(o=a));if(l){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,i,a]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Dermetric/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,a,[o,l,s]=r,c=0;if(o.some((t=>0!==e[t]))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(s)var d=s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[794],(()=>n(6271)));r=n.O(r)})();
//# sourceMappingURL=main.23660557.js.map